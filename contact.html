<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Streamartisan</title>
    <link rel="stylesheet" href="styles/home.css" />
    <link rel="stylesheet" href="styles/contact.css" />
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- FullCalendar CSS -->
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.css" rel="stylesheet">
    <!-- Moment.js for Time Zones -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.34/moment-timezone-with-data.min.js"></script>
    <!-- EmailJS -->
    <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
    <style>
      /* Custom Styles for Request a Call Popup */
      #requestCallPopup {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1000;
        justify-content: center;
        align-items: center;
      }
      .request-call-popup-content {
        background: white;
        padding: 2rem;
        border-radius: 0.5rem;
        max-width: 90%;
        width: 600px;
        position: relative;
        overflow-y: auto;
        max-height: 90vh;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
      }
      .request-call-close-btn {
        position: absolute;
        top: 0.5rem;
        right: 0.5rem;
        font-size: 1.5rem;
        cursor: pointer;
        color: #333;
      }
      #calendar {
        max-width: 100%;
        margin: 1rem auto;
        min-height: 400px; /* Ensure visibility */
      }
      .fc-timegrid-slot {
        height: 2rem;
      }
      .fc-timegrid-col {
        cursor: pointer;
      }
      .fc-timegrid-slot-label {
        font-size: 0.875rem;
      }
      @media (max-width: 640px) {
        .request-call-popup-content {
          padding: 1rem;
          max-width: 95%;
        }
        #calendar {
          font-size: 0.75rem;
          min-height: 300px;
        }
        .fc-timegrid-slot {
          height: 1.5rem;
        }
      }
      .request-call-btn {
        background: #d84676;
        color: white;
        padding: 0.75rem 1.5rem;
        border-radius: 1.5rem;
        font-weight: bold;
        border: none;
        cursor: pointer;
        transition: background-color 0.3s ease;
      }
      .request-call-btn:hover,
      .request-call-btn:focus {
        background: #b53a61;
        outline: none;
      }
    </style>
  </head>
  <body>
    <section class="hero">
      <header class="navbar">
        <a href="index.html">
          <img src="images/lllogo.png" alt="Stream Artisan Logo" class="logo" />
        </a>
        <div class="hamburger" onclick="toggleMenu()">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </header>
      <div class="hero-content">
        <h1>Contact Us</h1>
        <p>Get in touch with us</p>
      </div>
    </section>

    <!-- Overlay Navigation -->
    <div id="overlay" class="overlay-menu">
      <span class="closebtn" onclick="toggleMenu()">×</span>
      <div class="overlay-content">
        <div class="overlay-left">
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="portfolio.html">Portfolio</a></li>
            <li><a href="contact.html">Contact</a></li>
            <li><a href="packages.html">Packages</a></li>
            <li><a href="services.html">Services</a></li>
          </ul>
        </div>
        <div class="overlay-right">
          <h2 class="services-title">Services</h2>
          <div class="service-category">
            <h3>Digital Development</h3>
            <ul>
              <li>Mobile app developers</li>
              <li>Chatbots</li>
              <li>Web developers</li>
              <li>Web-app developers</li>
              <li>Intranet/sharepoints developers</li>
              <li>IOT developers</li>
              <li>Blockchain developers</li>
              <li>AI/ML solutions</li>
            </ul>
          </div>
          <div class="service-category">
            <h3>Graphic Designing</h3>
            <ul>
              <li>Logo design</li>
              <li>Brand identity</li>
              <li>UI/UX design</li>
              <li>Illustrations</li>
              <li>3D modeling</li>
              <li>Motion graphics</li>
              <li>Print design</li>
            </ul>
          </div>
          <div class="service-category">
            <h3>Digital Marketing</h3>
            <ul>
              <li>SEO optimization</li>
              <li>Social media marketing</li>
              <li>Email campaigns</li>
              <li>Content creation</li>
              <li>Pay-per-click advertising</li>
              <li>Analytics and reporting</li>
              <li>Influencer marketing</li>
            </ul>
          </div>
          <div class="service-category">
            <h3>Ebook</h3>
            <ul>
              <li>Ebook writing</li>
              <li>Ebook editing</li>
              <li>Ebook formatting</li>
              <li>Cover design</li>
              <li>Publishing assistance</li>
              <li>Marketing for ebooks</li>
              <li>Distribution strategies</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <section class="contact">
      <div class="contact-container">
        <!-- <img src="/images/logo.png" alt="Logo" class="contact-left-image" /> -->
        <!-- <img src="/images/phone.png" alt="Phone" class="contact-right-image" /> -->
      </div>
      <!-- <img src="https://lottiefiles.com/free-animation/contact-us-UrbpLxaagd" alt="Phone" class="contact-bottom-left-image" /> -->
      <div class="contact-header">
        <h2 class="contact-title">Let's Talk</h2>
        <p class="contact-description">
          Want to chat with us about your mobile, web, or digital ideas? <br />
          Call us on <a href="tel:+14092454910">(409) 245-4910</a> or fill in
          the contact form below.
        </p>
      </div>

      <!-- Request a Call Button -->
      <div class="text-center mb-6">
        <button id="requestCallBtn" class="request-call-btn" aria-label="Request a call">Request a Call</button>
      </div>

      <form id="contact-form" class="contact-form">
        <input
          type="text"
          id="name"
          name="name"
          placeholder="Your Name"
          required
          class="form-input"
        />
        <input
          type="email"
          id="email"
          name="email"
          placeholder="Your Email"
          required
          class="form-input"
        />
        <textarea
          id="message"
          name="message"
          rows="5"
          placeholder="Your Message"
          required
          class="form-input"
        ></textarea>
        <button type="submit" class="form-button">Send Message</button>
      </form>
    </section>

    <!-- Request a Call Popup -->
    <div id="requestCallPopup" class="popup">
      <div class="request-call-popup-content">
        <span class="request-call-close-btn" aria-label="Close popup">×</span>
        <h2 class="text-2xl font-bold mb-4 text-center">Schedule a Call</h2>
        <div id="regionSelection" class="mb-4 text-center">
          <p class="mb-2">Select your region:</p>
          <button id="usBtn" class="bg-green-500 text-white py-2 px-4 rounded-lg mr-2 hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-500" aria-label="Select US region">US</button>
          <button id="ukBtn" class="bg-purple-500 text-white py-2 px-4 rounded-lg hover:bg-purple-600 focus:outline-none focus:ring-2 focus:ring-purple-500" aria-label="Select UK region">UK</button>
        </div>
        <div id="calendarSection" class="hidden">
          <div id="calendar"></div>
          <form id="bookingForm" class="mt-4">
            <div class="mb-4">
              <label for="bookingName" class="block text-sm font-medium text-gray-700">Name</label>
              <input type="text" id="bookingName" required class="mt-1 p-2 w-full border rounded-lg focus:ring-[#d84676] focus:border-[#d84676]" aria-required="true">
            </div>
            <div class="mb-4">
              <label for="bookingEmail" class="block text-sm font-medium text-gray-700">Email</label>
              <input type="email" id="bookingEmail" required class="mt-1 p-2 w-full border rounded-lg focus:ring-[#d84676] focus:border-[#d84676]" aria-required="true">
            </div>
            <div class="mb-4">
              <label for="notes" class="block text-sm font-medium text-gray-700">Notes (Optional)</label>
              <textarea id="notes" class="mt-1 p-2 w-full border rounded-lg focus:ring-[#d84676] focus:border-[#d84676]" rows="4"></textarea>
            </div>
            <div class="mb-4">
              <label for="selectedTime" class="block text-sm font-medium text-gray-700">Selected Time</label>
              <input type="text" id="selectedTime" readonly class="mt-1 p-2 w-full border rounded-lg bg-gray-100" aria-readonly="true">
              <input type="hidden" id="timezone">
            </div>
            <button type="submit" class="bg-[#d84676] text-white font-bold py-2 px-4 rounded-lg hover:bg-[#b53a61] focus:outline-none focus:ring-2 focus:ring-[#d84676]" aria-label="Confirm booking">Confirm Booking</button>
          </form>
        </div>
        <div id="confirmation" class="hidden text-center">
          <h3 class="text-xl font-bold mb-4">Booking Confirmed!</h3>
          <p id="confirmationDetails"></p>
          <button id="closeConfirmation" class="bg-[#d84676] text-white font-bold py-2 px-4 rounded-lg mt-4 hover:bg-[#b53a61] focus:outline-none focus:ring-2 focus:ring-[#d84676]" aria-label="Close confirmation">Close</button>
        </div>
      </div>
    </div>

    <footer>
      <div class="row">
        <div class="col">
          <ul>
            <li>
              <a href="home.html">
                <img src="images/lllogo.png" alt="Stream Artisan Logo" class="logo" width="500px" />
              </a>
            </li>
            <li>447716487602</li>
            <li>services@streamartisan.com</li>
            <li>UK</li>
            <li>Office No.50A, 5 The Shires Old <br /> Bedford Road Luton, England LU27QA</li>
            <li>USA</li>
            <li>Stream Artisan Corporation 418 <br> Broadway #5981 Albany, NY, 12207</li>
          </ul>
        </div>
        <div class="col">
          <h4>Digital Development</h4>
          <ul>
            <li>Mobile app developers</li>
            <li>Chatbots</li>
            <li>Web developers</li>
            <li>Web-app developers</li>
            <li>Intranet/Sharepoint Developers</li>
            <li>IOT Developers</li>
            <li>BlockChain Developers</li>
            <li>AI/ML Solutions</li>
          </ul>
        </div>
        <div class="col">
          <h4>Ebook</h4>
          <ul>
            <li>E-Book Writting</li>
            <li>E-Book Writting</li>
            <li>E-Book Formatting</li>
            <li>Cover Design</li>
            <li>Publishing Assistance</li>
            <li>Marketing for E-Books</li>
            <li>Distribution Strategies</li>
          </ul>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <img src="/images/arrival.png" alt="Arrival Logo" />
        </div>
        <div class="col">
          <img src="/images/trust.png" alt="Trust Logo" />
        </div>
        <div class="col">
          <img src="/images/reviews.png" alt="Reviews Logo" />
        </div>
        <div class="col">
          <img src="/images/B-teck.png" alt="B-teck Logo" />
        </div>
        <div class="col">
          <img src="/images/site.png" alt="Site Logo" />
        </div>
      </div>
      <div class="row">
        <div class="col">
          copyright © 2025 Stream Artisan Corporation. All rights reserved.
        </div>
        <div class="col">
          <a href="#" id="privacyLink" style="color: white; text-decoration: underline">Privacy Policy</a>
        </div>
        <div class="col">
          <a href="#" id="termsLink" style="color: white; text-decoration: underline">Terms & Conditions</a>
        </div>
      </div>

      <!-- Privacy Policy Popup -->
      <div id="privacyModal" class="popup">
        <div class="popup-content">
          <span class="close-btn" data-target="privacyModal">×</span>
          <h2>Privacy Policy</h2>
          <p>At Stream Artisan, your privacy is important to us. This Privacy Policy outlines how we collect, use, and protect your personal information when you interact with our platform.</p>
          <h3>1. Information We Collect</h3>
          <p>We may collect the following types of information:</p>
          <p>• Personal Information: such as your name, email address, and payment details when you create an account or make purchases.</p>
          <p>• Usage Data: including IP address, browser type, pages visited, and time spent on our platform.</p>
          <p>• Cookies and Tracking Technologies: to enhance your experience and analyze platform usage.</p>
          <h3>2. How We Use Your Information</h3>
          <p>We use the information we collect to:</p>
          <p>• Provide and improve our services</p>
          <p>• Process transactions</p>
          <p>• Communicate with you regarding your account or updates</p>
          <p>• Ensure platform security and prevent fraud</p>
          <p>• Analyze usage patterns to optimize performance</p>
          <h3>3. Sharing Your Information</h3>
          <p>We do not sell your personal information. We may share data with trusted third parties only for the purposes of operating our platform, fulfilling legal obligations, or protecting rights and safety.</p>
          <h3>4. Data Security</h3>
          <p>We implement appropriate technical and organizational measures to protect your personal data from unauthorized access, alteration, disclosure, or destruction.</p>
          <h3>5. Your Rights</h3>
          <p>Depending on your location, you may have the right to:</p>
          <p>• Access the personal data we hold about you</p>
          <p>• Request corrections or deletions</p>
          <p>• Object to or restrict certain processing activities</p>
          <p>• Withdraw consent where applicable</p>
          <h3>6. Third-Party Links</h3>
          <p>Our platform may contain links to third-party websites. We are not responsible for their privacy practices and encourage you to review their privacy policies.</p>
          <h3>7. Children’s Privacy</h3>
          <p>Stream Artisan is not intended for use by children under the age of 13. We do not knowingly collect personal information from children.</p>
          <h3>8. Changes to This Policy</h3>
          <p>We may update this policy from time to time. When we do, we will revise the “Effective Date” at the top of this page and notify users if the changes are significant.</p>
          <h3>9. Contact Us</h3>
          <p>If you have any questions about this Privacy Policy, you can contact us at:</p>
          <p>Email: services@streamartisan.com</p>
          <p>Address: Stream Artisan Corporation 418 Broadway #5981 Albany, NY, 12207</p>
        </div>
      </div>

      <!-- Terms & Conditions Popup -->
      <div id="termsModal" class="popup">
        <div class="popup-content">
          <span class="close-btn" data-target="termsModal">×</span>
          <h2>Terms & Conditions</h2>
          <p>Welcome to Stream Artisan. By accessing or using our platform, you agree to comply with and be bound by the following Terms and Conditions. Please read them carefully.</p>
          <h3>1. Acceptance of Terms</h3>
          <p>By registering, accessing, or using Stream Artisan in any manner, you agree to these Terms and Conditions and our Privacy Policy. If you do not agree, please do not use our services.</p>
          <h3>2. Use of the Platform</h3>
          <p>You agree to use Stream Artisan only for lawful purposes and in a way that does not violate the rights of others or restrict their use of the platform. You are responsible for any activity under your account.</p>
          <h3>3. User Accounts</h3>
          <p>To access certain features, you may be required to create an account. You must provide accurate and complete information and keep your login credentials secure. You are responsible for any activity that occurs under your account.</p>
          <h3>4. Intellectual Property</h3>
          <p>All content on Stream Artisan, including but not limited to artwork, videos, text, graphics, and logos, is the property of Stream Artisan or its licensors and is protected by copyright and other intellectual property laws. You may not use, reproduce, or distribute any content without permission.</p>
          <h3>5. User-Generated Content</h3>
          <p>You may submit content to Stream Artisan (e.g., comments, artwork, videos). By submitting content, you grant us a non-exclusive, royalty-free, worldwide license to use, reproduce, and distribute it. You are solely responsible for the content you provide and must not upload anything illegal, harmful, or infringing on others’ rights.</p>
          <h3>6. Payments and Subscriptions</h3>
          <p>If your use of Stream Artisan involves purchases or subscriptions, you agree to provide accurate billing information. All payments are non-refundable unless stated otherwise.</p>
          <h3>7. Termination</h3>
          <p>We reserve the right to suspend or terminate your access to Stream Artisan at any time, with or without notice, if you violate these Terms or engage in harmful behavior.</p>
          <h3>8. Disclaimers</h3>
          <p>Stream Artisan is provided “as is” and “as available.” We do not guarantee that the platform will be uninterrupted, secure, or error-free. We are not responsible for any content uploaded by users.</p>
          <h3>9. Limitation of Liability</h3>
          <p>To the fullest extent permitted by law, Stream Artisan and its affiliates shall not be liable for any direct, indirect, incidental, or consequential damages arising from your use of the platform.</p>
          <h3>10. Governing Law</h3>
          <p>These Terms are governed by and construed in accordance with the laws of USA. Any disputes shall be subject to the exclusive jurisdiction of the courts in that location.</p>
          <h3>11. Messaging Terms & Conditions</h3>
          <p>You agree to receive informational messages (appointment reminders, account notifications, etc.) from Stream Artisan. Message frequency varies. Message and data rates may apply. For help, reply HELP or email us at suport@streamartisan.com. You can opt out at any time by replying STOP.</p>
          <h3>12. Changes to Terms</h3>
          <p>We may update these Terms from time to time. Continued use of the platform after changes constitutes your acceptance of the updated Terms.</p>
          <h3>13. Contact Us</h3>
          <p>If you have any questions about these Terms, contact us at:</p>
          <p>Email: services@streamartisan.com</p>
          <p>Address: Stream Artisan Corporation 418 Broadway #5981 Albany, NY, 12207</p>
        </div>
      </div>
    </footer>

    <!-- Floating button to scroll to top -->
    <div id="scrollToTop" class="scroll-to-top" onclick="scrollToTop()">
      <img src="https://image.shutterstock.com/image-vector/direction-arrow-icon-isolated-upward-260nw-193782530.jpg" alt="Scroll to Top" />
    </div>

    <!-- Scripts -->
    <script src="scripts/home.js"></script>
    <script src="scripts/contact.js"></script>
    <!-- FullCalendar JS -->
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.js"></script>
    <script>
      // Initialize EmailJS
      try {
        emailjs.init("YOUR_EMAILJS_USER_ID"); // Replace with your EmailJS user ID
        console.log('EmailJS initialized');
      } catch (e) {
        console.error('EmailJS initialization failed:', e);
      }

      document.addEventListener("DOMContentLoaded", function () {
        // Privacy and Terms Modals
        try {
          document.getElementById("privacyLink").onclick = function (e) {
            e.preventDefault();
            document.getElementById("privacyModal").style.display = "flex";
          };

          document.getElementById("termsLink").onclick = function (e) {
            e.preventDefault();
            document.getElementById("termsModal").style.display = "flex";
          };

          document.querySelectorAll(".close-btn").forEach((btn) => {
            btn.onclick = function () {
              const targetId = this.getAttribute("data-target");
              document.getElementById(targetId).style.display = "none";
            };
          });

          window.onclick = function (e) {
            if (e.target.classList.contains("popup")) {
              e.target.style.display = "none";
            }
          };
        } catch (e) {
          console.error('Modal setup error:', e);
        }

        // Navbar Scroll Handling
        try {
          let lastScrollTop = 0;
          const navbar = document.querySelector(".navbar");

          window.addEventListener("load", () => {
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            if (scrollTop > 0) {
              navbar.style.top = "-150px";
            } else {
              navbar.style.top = "0";
            }
          });

          window.addEventListener("scroll", () => {
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            if (scrollTop > lastScrollTop) {
              navbar.style.top = "-150px";
            } else {
              navbar.style.top = "0";
            }
            lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
          });
        } catch (e) {
          console.error('Navbar scroll error:', e);
        }

        // Scroll to Top
        try {
          const scrollToTopButton = document.getElementById("scrollToTop");
          window.addEventListener("scroll", () => {
            if (window.scrollY > 200) {
              scrollToTopButton.classList.add("show");
            } else {
              scrollToTopButton.classList.remove("show");
            }
          });

          function scrollToTop() {
            window.scrollTo({
              top: 0,
              behavior: "smooth",
            });
          }
        } catch (e) {
          console.error('Scroll to top error:', e);
        }

        // Contact Form Submission
        try {
          const form = document.getElementById('contact-form');
          form.addEventListener('submit', async (e) => {
            e.preventDefault();
            const formData = {
              name: form.name.value,
              email: form.email.value,
              message: form.message.value
            };
            try {
              const response = await fetch('http://localhost:5000/send', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(formData)
              });
              if (response.ok) {
                alert('Message sent successfully!');
                form.reset();
              } else {
                alert('Failed to send message.');
              }
            } catch (error) {
              console.error('Contact form error:', error);
              alert('Error sending message.');
            }
          });
        } catch (e) {
          console.error('Contact form setup error:', e);
        }

        // Floating Buttons (if applicable)
        try {
          const floatingButtons = document.querySelector(".floating-buttons");
          if (floatingButtons) {
            floatingButtons.addEventListener("click", () => {
              floatingButtons.classList.toggle("expanded");
            });
          }

          function toggleFloatingButtons() {
            if (floatingButtons) {
              floatingButtons.classList.toggle("expanded");
            }
          }
        } catch (e) {
          console.error('Floating buttons error:', e);
        }

        // Request a Call Popup Handling
        try {
          const requestCallPopup = document.getElementById('requestCallPopup');
          const requestCallBtn = document.getElementById('requestCallBtn');
          const requestCallCloseBtn = document.querySelector('.request-call-close-btn');
          const usBtn = document.getElementById('usBtn');
          const ukBtn = document.getElementById('ukBtn');
          const regionSelection = document.getElementById('regionSelection');
          const calendarSection = document.getElementById('calendarSection');
          const bookingForm = document.getElementById('bookingForm');
          const confirmation = document.getElementById('confirmation');
          const closeConfirmation = document.getElementById('closeConfirmation');
          let calendar;

          if (!requestCallBtn || !requestCallPopup) {
            throw new Error('Request call elements not found');
          }

          requestCallBtn.addEventListener('click', () => {
            console.log('Request call button clicked');
            requestCallPopup.style.display = 'flex';
            regionSelection.classList.remove('hidden');
            calendarSection.classList.add('hidden');
            confirmation.classList.add('hidden');
          });

          requestCallCloseBtn.addEventListener('click', () => {
            console.log('Close popup clicked');
            requestCallPopup.style.display = 'none';
            resetForm();
          });

          closeConfirmation.addEventListener('click', () => {
            console.log('Close confirmation clicked');
            requestCallPopup.style.display = 'none';
            resetForm();
          });

          function resetForm() {
            console.log('Resetting form');
            bookingForm.reset();
            document.getElementById('selectedTime').value = '';
            document.getElementById('timezone').value = '';
            regionSelection.classList.remove('hidden');
            calendarSection.classList.add('hidden');
            confirmation.classList.add('hidden');
            if (calendar) {
              calendar.destroy();
              calendar = null;
            }
          }

          function initCalendar(timezone) {
            console.log('Initializing calendar with timezone:', timezone);
            try {
              const calendarEl = document.getElementById('calendar');
              if (!calendarEl) {
                throw new Error('Calendar element not found');
              }
              if (!window.FullCalendar) {
                throw new Error('FullCalendar library not loaded');
              }
              calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'timeGridWeek',
                headerToolbar: {
                  left: 'prev,next today',
                  center: 'title',
                  right: 'timeGridWeek,timeGridDay'
                },
                slotMinTime: '09:00:00',
                slotMaxTime: '17:00:00',
                slotDuration: '00:30:00',
                allDaySlot: false,
                timeZone: timezone,
                height: 'auto',
                selectable: true,
                select: function(info) {
                  console.log('Time slot selected:', info.startStr);
                  const start = moment.tz(info.startStr, timezone).format('YYYY-MM-DD HH:mm z');
                  document.getElementById('selectedTime').value = start;
                  document.getElementById('timezone').value = timezone;
                }
              });
              calendar.render();
              console.log('Calendar rendered');
            } catch (e) {
              console.error('Calendar initialization error:', e);
              alert('Failed to load calendar. Please try again.');
            }
          }

          usBtn.addEventListener('click', () => {
            console.log('US button clicked');
            regionSelection.classList.add('hidden');
            calendarSection.classList.remove('hidden');
            initCalendar('America/New_York');
          });

          ukBtn.addEventListener('click', () => {
            console.log('UK button clicked');
            regionSelection.classList.add('hidden');
            calendarSection.classList.remove('hidden');
            initCalendar('Europe/London');
          });

          bookingForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            console.log('Booking form submitted');
            const name = document.getElementById('bookingName').value;
            const email = document.getElementById('bookingEmail').value;
            const notes = document.getElementById('notes').value;
            const selectedTime = document.getElementById('selectedTime').value;
            const timezone = document.getElementById('timezone').value;

            if (!selectedTime) {
              alert('Please select a time slot.');
              return;
            }

            try {
              const response = await fetch('http://localhost:3000/book', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ name, email, notes, selectedTime, timezone })
              });
              if (!response.ok) throw new Error('Booking failed');

              await emailjs.send('YOUR_SERVICE_ID', 'YOUR_TEMPLATE_ID', {
                name,
                email,
                selectedTime,
                timezone,
                notes
              });

              calendarSection.classList.add('hidden');
              confirmation.classList.remove('hidden');
              document.getElementById('confirmationDetails').innerText = `Thank you, ${name}! Your call is scheduled for ${selectedTime}. A confirmation email has been sent to ${email}.`;
              console.log('Booking successful');
            } catch (error) {
              console.error('Booking error:', error);
              alert('Error booking the call. Please try again.');
            }
          });
        } catch (e) {
          console.error('Request a call setup error:', e);
        }
      });
    </script>
  </body>
</html>